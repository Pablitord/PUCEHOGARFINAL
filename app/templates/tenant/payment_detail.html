{% extends "base.html" %}
{% block title %}Detalle de Pago - PUCEHOGAR{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="card app-card mb-3">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="bi bi-receipt"></i> Detalle de Pago</h5>
        <span class="soft-badge {% if payment.status.value == 'approved' %}soft-badge-success{% elif payment.status.value == 'pending' %}soft-badge-warning{% else %}soft-badge-danger{% endif %}">
          {{ payment.status.value|title }}
        </span>
      </div>
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <p class="mb-1 text-muted">Monto</p>
            <h4 class="fw-bold">${{ "%.2f"|format(payment.amount) }}</h4>
          </div>
          <div class="col-md-6">
            <p class="mb-1 text-muted">Mes pagado</p>
            <h6 class="fw-semibold">{{ payment.month }}</h6>
          </div>
          <div class="col-md-6">
            <p class="mb-1 text-muted">Departamento</p>
            {% if department %}
              <div class="fw-semibold">{{ department.title }}</div>
              <div class="text-muted small">{{ department.address }}</div>
            {% else %}
              <div class="text-muted">N/D</div>
            {% endif %}
          </div>
          <div class="col-md-6">
            <p class="mb-1 text-muted">Revisado por</p>
            <div class="text-muted">{{ admin.full_name if admin else 'En revisi√≥n' }}</div>
          </div>
          {% if payment.notes %}
          <div class="col-12">
            <p class="mb-1 text-muted">Notas</p>
            <div class="alert {% if payment.status.value == 'rejected' %}alert-danger{% elif payment.status.value == 'approved' %}alert-success{% else %}alert-secondary{% endif %} mb-0">
              {{ payment.notes }}
            </div>
          </div>
          {% endif %}
          <div class="col-12">
            <p class="mb-1 text-muted">Comprobante</p>
            {% if payment.receipt_url %}
              <a href="{{ payment.receipt_url }}" target="_blank" class="btn btn-outline-primary btn-sm btn-icon">
                <i class="bi bi-eye"></i> Ver comprobante
              </a>
            {% else %}
              <div class="alert alert-warning mb-0">
                <i class="bi bi-exclamation-triangle"></i> No hay comprobante asociado.
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex gap-2">
      <a href="{{ url_for('tenant.dashboard') }}" class="btn btn-outline-secondary btn-icon"><i class="bi bi-arrow-left"></i> Volver</a>
      {% if department %}
        <a href="{{ url_for('visitor.department_detail', department_id=department.id) }}" class="btn btn-primary btn-icon"><i class="bi bi-building"></i> Ver departamento</a>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

